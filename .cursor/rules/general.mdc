---
alwaysApply: true
---
# .cursor-rules.yaml

project:
  name: QR Attendance System (Local)
  description: |
    Flask + SQLite backend, HTML/CSS/JS frontend, local IP üzerinden çalışan QR tabanlı yoklama sistemi.
    Tüm sistem lokalde çalışır, hiçbir bulut altyapısına ihtiyaç duymaz.

rules:
  - alwaysApply: true
    title: 📦 Dosya Yapısı Kuralları
    description: |
      Proje aşağıdaki yapıyı korumalı:
      - backend/: Flask uygulaması, QR üretimi, SQLite veritabanı
      - frontend/: HTML, CSS, JS dosyaları
      - qr_codes/: oluşturulan QR görselleri
      - .env: Geliştirme ortamı değişkenleri

  - alwaysApply: true
    title: 🌐 IP Ayarı Kuralı
    description: |
      QR kodlar ve yönlendirmeler localhost değil, LAN IP (örnek: http://192.168.1.5:5000) kullanılmalıdır.
      Flask `app.run(host="0.0.0.0", port=5000)` ile çalıştırılmalı.

  - alwaysApply: true
    title: 🔒 Güvenlik Duvarı ve Port Açıklığı
    description: |
      Windows/Linux üzerinde port 5000 dış dünyaya açık olmalı.
      Aksi takdirde mobil cihazlardan erişilemez.

  - alwaysApply: true
    title: 🗃️ Veritabanı Kuralı
    description: |
      Kullanılan veritabanı SQLite'dır. Tek bir `.db` dosyası kullanılmalı.
      Tablolar: users, courses, sessions, attendances
      Her tablo foreign key ilişkileriyle bağlı olmalıdır.

  - alwaysApply: true
    title: 🧑‍🏫 Rol Bazlı Yetki Kuralı
    description: |
      - Admin her şeye erişebilir.
      - Instructor sadece kendi derslerine erişebilir.
      - Katılımcı login olmadan sadece QR ile form doldurabilir.

  - alwaysApply: true
    title: 📤 QR Kod Kuralı
    description: |
      Oturum oluşturulduğunda QR kodu `qr_codes/` klasörüne PNG olarak kaydedilmeli.
      QR içeriği şu formatta olmalı: http://192.168.x.x:5000/attend/<token>

  - alwaysApply: true
    title: 🖼️ Public Katılım Formu Kuralı
    description: |
      /attend/<token> altında basit bir form gösterilmeli:
      - Ad
      - Soyad
      - Submit butonu → /attend endpoint’ine POST gönderir

  - alwaysApply: true
    title: 🔁 Tekrar Katılım Engelleme (Opsiyonel)
    description: |
      Aynı sessionId + ip + isim kombinasyonu ile tekrar katılım yapılamamalı.

  - alwaysApply: true
    title: 📥 CSV Export Özelliği (Opsiyonel)
    description: |
      Eğitmen panelinde oturuma ait yoklamalar `.csv` olarak indirilebilmelidir.

